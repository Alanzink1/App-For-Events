<app-header></app-header>

<ion-content [fullscreen]="true">

  <ion-spinner *ngIf="isLoading" name="crescent" class="spinner-center"></ion-spinner>

  <div *ngIf="!isLoading && !usuarioLogado" class="container-deslogado">
    <h2>Você não está logado</h2>
    <p>Faça login para ver seu perfil e seus ingressos.</p>
    <ion-button routerLink="/login" shape="round">
      <ion-icon name="log-in-outline" slot="start"></ion-icon>
      Fazer login ou Cadastrar
    </ion-button>
  </div>

  <div *ngIf="!isLoading && usuarioLogado && perfil">
    
    <div class="profile-header">
      <div class="avatar-container mt-3">
        <img [src]="perfil.fotoUrl" *ngIf="perfil.fotoUrl" class="profile-avatar">
        <ion-icon name="person-circle" *ngIf="!perfil.fotoUrl" class="profile-avatar-icon"></ion-icon>
      </div>
      <h2 class="profile-name">{{ perfil.nome || 'Usuário' }}</h2>
      <ion-icon name="settings-outline" class="settings-icon" routerLink="/configuracao"></ion-icon>
    </div>

    <div class="profile-options">
      <ion-item lines="none" class="option-item" button routerLink="/confirmados">
        <ion-icon name="ticket-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Meus Ingressos</ion-label>
      </ion-item>
      <ion-item lines="none" class="option-item" button routerLink="/historico">
        <ion-icon name="time-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Histórico de Eventos</ion-label>
      </ion-item>
      <ion-item lines="none" class="option-item" button routerLink="/eventos-salvos">
        <ion-icon name="heart-outline" slot="start" color="primary"></ion-icon>
        <ion-label>Eventos Salvos</ion-label>
      </ion-item>

      <ion-button *ngIf="perfil.organizador" [routerLink]="['/organizador', usuarioLogado.uid, 'home']" expand="block" shape="round" class="organizer-panel-button">
        Painel do Organizador
      </ion-button>
      <ion-button *ngIf="!perfil.organizador" expand="block" shape="round" class="organizer-button">
        Tornar-se Organizador
      </ion-button>
    </div>
  </div>

</ion-content>

<app-navbar></app-navbar>